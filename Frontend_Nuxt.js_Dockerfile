ğŸ” What is Nuxt.js?
Nuxt is a powerful Vue framework for building:

*Server-Side Rendered (SSR) apps

*Static sites (via nuxt generate)

*Hybrid apps (some pages SSR, some static)

*API routes, middleware, and more

So like Next.js, Nuxt needs a live Node.js server in SSR mode.



ğŸ”§ Build Tool Used by Nuxt
Nuxt 3 uses Vite or Webpack under the hood (defaults to Vite).
The CLI command to build and start is:

# Build (for production)
npx nuxi build

# Start SSR server
npx nuxi preview



ğŸ“ Nuxt 3 Project Directory Structure (Before Build)

my-nuxt-app/
â”œâ”€â”€ app.vue                 # Root Vue component (like App.vue)
â”œâ”€â”€ nuxt.config.ts         # Main Nuxt configuration
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json          # TypeScript support (optional)
â”œâ”€â”€ public/                # Static files served as-is
â”œâ”€â”€ assets/                # Unprocessed assets (SCSS, images, etc.)
â”œâ”€â”€ components/            # Vue components (auto-imported)
â”œâ”€â”€ composables/           # Reusable logic (like useFetch)
â”œâ”€â”€ layouts/               # App layout wrappers
â”œâ”€â”€ pages/                 # Route-based views (auto-routed)
â”œâ”€â”€ middleware/            # Route guards and middlewares
â”œâ”€â”€ plugins/               # Vue/JS plugins (e.g. axios, toast)
â”œâ”€â”€ server/                # Server API routes or middleware
â”‚   â”œâ”€â”€ api/               # API endpoints (`/api/*`)
â”‚   â””â”€â”€ middleware/        # Server middleware
â”œâ”€â”€ utils/                 # Custom utilities (optional)
â”œâ”€â”€ .env                   # Environment variables (optional)
â”œâ”€â”€ .output/               # (Created after build)
â””â”€â”€ node_modules/



ğŸ³ Dockerfile: Production-Ready Nuxt.js App (SSR, Secure, Multi-Stage)

# -------- STAGE 1: Build --------
FROM node:20-alpine AS builder

WORKDIR /app

# Create non-root user
RUN addgroup -S app && adduser -S app -G app
USER app

# Install dependencies
COPY --chown=app:app package*.json ./
RUN npm ci

# Copy the rest of the code
COPY --chown=app:app . .

# Build the Nuxt app
RUN npm run build

# -------- STAGE 2: Run the built app --------
FROM node:20-alpine AS runner

WORKDIR /app

# Create same non-root user in runtime
RUN addgroup -S app && adduser -S app -G app
USER app

# Install only production deps
COPY --from=builder /app/package*.json ./
RUN npm ci --omit=dev

# Copy built files and runtime dependencies
COPY --from=builder /app/.output ./.output
COPY --from=builder /app/node_modules ./node_modules

# Expose Nuxt's default port
EXPOSE 3000

# Healthcheck (basic ping)
HEALTHCHECK --interval=30s --timeout=5s --start-period=10s --retries=3 \
  CMD wget --no-verbose --tries=1 --spider http://localhost:3000 || exit 1

# Start Nuxt in production mode
CMD ["node", ".output/server/index.mjs"]


################################################################

âœ… Best Practices Covered
| Standard                 | Used? | Notes                      |
| ------------------------ | ----- | -------------------------- |
| **Multi-stage build**    | âœ…     | Node builder + lean runner |
| **Non-root user**        | âœ…     | `app` user in both stages  |
| **Production-only deps** | âœ…     | Uses `--omit=dev`          |
| **Healthcheck**          | âœ…     | Basic HTTP ping            |
| **Secure image**         | âœ…     | Alpine-based Node          |

##################################################################

ğŸ“ Nuxt Output Structure After Build
After npm run build, Nuxt creates:

.output/
â”œâ”€â”€ public/
â”œâ”€â”€ server/
â”‚   â””â”€â”€ index.mjs  â† Entry point for SSR server
â”œâ”€â”€ ...

* So in runtime we just run:
node .output/server/index.mjs


###################################################################

ğŸ§  What Happens at Build Time (npm run build)
Nuxt compiles everything into .output/

Inside .output/ youâ€™ll find:

public/: your static assets

server/: Node-based SSR server code

dist/: compiled Vue components
